import{s as E,u as L,n as D,m as j,B as F}from"./poke-BJZzk1Gx.js";import{s as T,a as z}from"./index-UtQxpJzf.js";import{d as M,f as A,h as _,o as u,w as r,a as g,b as a,U as B,u as e,e as o,t as p,i as Q,N as R,r as c,V as U,c as f,D as h,F as k,g as W,Q as X}from"./index-CjjMKOSc.js";import{s as q}from"./index-BiZlP3ac.js";import{s as C}from"./index-76VQsigu.js";import{s as v}from"./index-BKAOXXWU.js";const G=["src","alt"],I={name:"SplitterPanel"},H=M({...I,props:{sprite:{},name:{},hp:{},maxHp:{},enemy:{type:Boolean}},setup($){const t=$,d=A(()=>Math.floor(t.hp/t.maxHp*100));return(s,m)=>(u(),_(e(T),{style:B(s.enemy?"text-align: right":"")},{default:r(()=>[g("img",{src:s.sprite,alt:s.name,style:B(s.enemy?"":"transform: scaleX(-1)"),onLoad:m[0]||(m[0]=n=>s.$emit("sprite"))},null,44,G),a(e(E),{value:d.value},{default:r(()=>[o("HP: "+p(s.hp)+" ("+p(d.value)+"%)",1)]),_:1},8,["value"])]),_:1},8,["style"]))}}),J={style:{display:"flex","justify-content":"space-around"}},se=M({__name:"PokeBattle",setup($){const t=L(),d=Q(),s=R(),m=c(0),n=c({}),y=c(0),x=c(!1),S=U([]);function V(){m.value=t.hp}function w(){y.value=n.value.stats.hp}function N(i){i.select(y),i.used=!0}return d.load("getPokelist").setWhenSuccess(async i=>{await D(i.results[Math.floor(Math.random()*i.results.length)].url,n.value,c(t.level),c(0)),S.push(...j.getMoveList(new F(n.value,()=>t.level,s))),x.value=!0}).fire(),(i,P)=>(u(),f("main",null,[a(e(C),null,{title:r(()=>[o(p(e(t).name)+" ",1),a(e(q),{style:{display:"inline-block"}},{default:r(()=>P[0]||(P[0]=[o("VS")])),_:1,__:[0]}),o(" "+p(n.value.ko+" Lv "+e(t).level),1)]),content:r(()=>[x.value?(u(),_(e(z),{key:0},{default:r(()=>[a(H,{sprite:e(t).sprite,name:e(t).name,hp:m.value,"max-hp":e(t).hp,onSprite:V},null,8,["sprite","name","hp","max-hp"]),a(H,{sprite:n.value.sprites,name:n.value.ko,hp:y.value,"max-hp":n.value.stats.hp,enemy:"",onSprite:w},null,8,["sprite","name","hp","max-hp"])]),_:1})):h("",!0)]),_:1}),a(e(v)),a(e(C),null,{content:r(()=>[g("div",J,[(u(!0),f(k,null,W(S,(l,b)=>(u(),_(e(X),{key:b,variant:"outlined",disabled:l.used,onClick:K=>N(l)},{default:r(()=>[g("div",null,[o(p(l.ko)+" ",1),a(e(v)),o(" "+p(l.category)+" ",1),l.category.includes("damage")?(u(),f(k,{key:0},[a(e(v)),o(" 예상 데미지: "+p(l.expectDamage),1)],64)):h("",!0),l.expectEffect?(u(),f(k,{key:1},[a(e(v)),o(" 효과: "+p(l.expectEffect),1)],64)):h("",!0)])]),_:2},1032,["disabled","onClick"]))),128))])]),_:1})]))}});export{se as default};
